{"version":3,"mappings":";4cA8BA,MAAMA,EAAQC,EAiBRC,EAAaC,EAAI,IAAI,EACrBC,EAAqBD,EAAI,IAAI,EAC7BE,EAAmBF,EAAI,IAAI,EAC3BG,EAAQH,EAAI,GAAI,EAChBI,EAAiBJ,EAAI,IAAI,EACzBK,EAAkBL,EAAI,GAAI,EAE1BM,87CACN,IAAIC,EAAiB,KAErB,MAAMC,EAAc,IAAM,CACxB,GAAI,CAACT,EAAW,MAAO,OACvB,KAAM,CAAE,YAAAU,CAAW,EAAKV,EAAW,MAE/BU,EAAc,IAChBN,EAAM,MAAQM,EAAcL,EAAe,MAE/C,EAEMM,EAAgB,SAAY,CAEhC,GADAR,EAAiB,MAAQ,KACrB,EAACL,EAAM,cAEX,GAAI,CACF,MAAMc,EAAY,OAAO,KAAKL,CAAO,EAAE,KAAKM,GAC1CA,EAAK,SAAS,IAAIf,EAAM,aAAa,MAAM,CACjD,EAEI,GAAIc,EAAW,CACb,MAAME,EAAkB,MAAMP,EAAQK,CAAS,EAAC,EAChDT,EAAiB,MAAQW,EAAgB,QAEzCC,EAAS,IAAM,CACbN,GACR,CAAO,CACP,MACM,QAAQ,KAAK,gCAAgCX,EAAM,aAAa,EAAE,CAExE,OAAWkB,EAAO,CACd,QAAQ,MAAM,mCAAoCA,CAAK,EACvDb,EAAiB,MAAQ,IAC7B,CACA,EAEAc,EAAM,IAAMnB,EAAM,cAAe,IAAM,CACrCa,GACF,EAAG,CAAE,UAAW,EAAK,CAAE,EAEvBO,EAAU,IAAM,CACdP,IAEAH,EAAiB,IAAI,eAAe,IAAM,CACxCC,GACJ,CAAG,EAEGT,EAAW,OACbQ,EAAe,QAAQR,EAAW,KAAK,CAE3C,CAAC,EAEDmB,EAAY,IAAM,CAChBhB,EAAiB,MAAQ,KACrBK,GACFA,EAAe,WAAU,CAE7B,CAAC,gXA/GM,MAAM,2BAA2B,IAAI,cAgB7BY,EAAA,OAAM,qBAAqB,0BAhBxC,OAAAC,EAAA,EAAAC,EAsBM,MAtBNC,EAsBM,CArBJC,EAoBM,OAnBJ,IAAI,qBACJ,MAAM,sBACL,MAAKC,EAAA,oBAAkCC,EAAA,KAAK,wCAA8DA,EAAA,cAAc,eAA0BA,EAAA,eAAe,cAOlKC,EASWC,EAAA,MARE,UACT,IAA4D,CAA3CF,EAAA,kBAAjBL,EAAA,EAAAM,EAA4DE,EAApBH,EAAA,gBAAgB,uBAE/C,WACT,IAEM,CAFNF,EAEM,MAFNJ,EAEM,CADJU,EAA8DJ,EAAA,MAAxD,KAAK,cAAc,MAAM","names":["props","__props","wrapperRef","ref","thumbnailContainer","previewComponent","scale","containerWidth","containerHeight","modules","resizeObserver","updateScale","clientWidth","loadComponent","moduleKey","path","componentModule","nextTick","error","watch","onMounted","onUnmounted","_hoisted_2","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_normalizeStyle","$setup","_createBlock","_Suspense","_resolveDynamicComponent","_createVNode"],"ignoreList":[],"sources":["../../src/components/preview/DesignThumbnail.vue"],"sourcesContent":["<template>\r\n  <div class=\"design-thumbnail-wrapper\" ref=\"wrapperRef\">\r\n    <div \r\n      ref=\"thumbnailContainer\" \r\n      class=\"thumbnail-container\"\r\n      :style=\"{ \r\n        transform: `scale(${scale})`,\r\n        transformOrigin: 'top left',\r\n        width: `${containerWidth}px`,\r\n        height: `${containerHeight}px`\r\n      }\"\r\n    >\r\n      <Suspense>\r\n        <template #default>\r\n          <component v-if=\"previewComponent\" :is=\"previewComponent\" />\r\n        </template>\r\n        <template #fallback>\r\n          <div class=\"loading-placeholder\">\r\n            <Icon icon=\"mdi:loading\" class=\"animate-spin text-gray-400\" />\r\n          </div>\r\n        </template>\r\n      </Suspense>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, watch, onUnmounted, nextTick } from 'vue';\r\nimport { Icon } from '@iconify/vue';\r\n\r\nconst props = defineProps({\r\n  componentName: {\r\n    type: String,\r\n    required: true\r\n  },\r\n  // We keep width and height props for backward compatibility, \r\n  // but they won't strictly dictate the CSS anymore if the wrapper resizes.\r\n  width: {\r\n    type: Number,\r\n    default: 400\r\n  },\r\n  height: {\r\n    type: Number,\r\n    default: 300\r\n  }\r\n});\r\n\r\nconst wrapperRef = ref(null);\r\nconst thumbnailContainer = ref(null);\r\nconst previewComponent = ref(null);\r\nconst scale = ref(0.25); \r\nconst containerWidth = ref(1920); \r\nconst containerHeight = ref(2000); // Make height tall enough so it covers the thumbnail wrapper fully before overflow hidden\r\n\r\nconst modules = import.meta.glob('@/components/previews/*.vue');\r\nlet resizeObserver = null;\r\n\r\nconst updateScale = () => {\r\n  if (!wrapperRef.value) return;\r\n  const { clientWidth } = wrapperRef.value;\r\n  // Always scale to fit the exact width of the wrapper layout\r\n  if (clientWidth > 0) {\r\n    scale.value = clientWidth / containerWidth.value;\r\n  }\r\n};\r\n\r\nconst loadComponent = async () => {\r\n  previewComponent.value = null;\r\n  if (!props.componentName) return;\r\n\r\n  try {\r\n    const moduleKey = Object.keys(modules).find(path => \r\n      path.includes(`/${props.componentName}.vue`)\r\n    );\r\n\r\n    if (moduleKey) {\r\n      const componentModule = await modules[moduleKey]();\r\n      previewComponent.value = componentModule.default;\r\n      \r\n      nextTick(() => {\r\n        updateScale();\r\n      });\r\n    } else {\r\n      console.warn(`Preview component not found: ${props.componentName}`);\r\n    }\r\n  } catch (error) {\r\n    console.error('Error loading preview component:', error);\r\n    previewComponent.value = null;\r\n  }\r\n};\r\n\r\nwatch(() => props.componentName, () => {\r\n  loadComponent();\r\n}, { immediate: false });\r\n\r\nonMounted(() => {\r\n  loadComponent();\r\n  \r\n  resizeObserver = new ResizeObserver(() => {\r\n    updateScale();\r\n  });\r\n  \r\n  if (wrapperRef.value) {\r\n    resizeObserver.observe(wrapperRef.value);\r\n  }\r\n});\r\n\r\nonUnmounted(() => {\r\n  previewComponent.value = null;\r\n  if (resizeObserver) {\r\n    resizeObserver.disconnect();\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.design-thumbnail-wrapper {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n  background: white;\r\n}\r\n\r\n.thumbnail-container {\r\n  position: relative;\r\n  pointer-events: none;\r\n  user-select: none;\r\n}\r\n\r\n.loading-placeholder {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: #f3f4f6;\r\n}\r\n\r\n/* Disable all interactions in thumbnail */\r\n.thumbnail-container :deep(*) {\r\n  pointer-events: none !important;\r\n  cursor: default !important;\r\n}\r\n\r\n/* Optimize rendering for thumbnail */\r\n.thumbnail-container :deep(img),\r\n.thumbnail-container :deep(video),\r\n.thumbnail-container :deep(iframe) {\r\n  image-rendering: -webkit-optimize-contrast;\r\n  image-rendering: crisp-edges;\r\n}\r\n\r\n/* Hide scrollbars */\r\n.thumbnail-container :deep(*) {\r\n  scrollbar-width: none;\r\n  -ms-overflow-style: none;\r\n}\r\n\r\n.thumbnail-container :deep(*)::-webkit-scrollbar {\r\n  display: none;\r\n}\r\n\r\n/* Reduce animations for better performance */\r\n.thumbnail-container :deep(*) {\r\n  animation-duration: 0s !important;\r\n  animation-delay: 0s !important;\r\n  transition-duration: 0s !important;\r\n}\r\n</style>\r\n\r\n"],"file":"_astro/DesignThumbnail.CGj97X3l.js"}